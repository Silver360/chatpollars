var myApp=angular.module("dollars",["ui.router"]);myApp.config(["$urlRouterProvider","$stateProvider","$locationProvider",function(a,b,c){b.state("prelogin",{url:"/prelogin",templateUrl:"views/prelogin.html",controller:"preLogin"}).state("login",{url:"/login",templateUrl:"views/login.html",controller:"login",resolve:{authentication:function(a){a.init()}}}).state("chat",{url:"/chat",templateUrl:"views/chat.html",controller:"chat",resolve:{authentication:function(a){a.init()}}}).state("otherwise",{url:"*path",templateUrl:"views/chat.html",controller:"chat",resolve:{authentication:function(a){a.init()}}})}]);var app=angular.module("dollars");app.controller("chat",["$scope","$state","ServiceMessages",function(a,b,c){a.user="",a.msg={};var d=function(){c.getMessages()};a.sendMessage=function(b){c.sendMessage(b),a.message=""},a.$on("new:message",function(){a.msg=c.getMessage()}),d()}]);var app=angular.module("dollars");app.controller("login",["$scope","serviceLogin","factoryAuthentication",function(a,b,c){a.auth={login:"",password:""},a.msg="",a.login=function(){b.login(a.auth)},a.$on("login:erorr",function(){a.msg=b.getError()})}]);var app=angular.module("dollars");app.controller("preLogin",["$scope","$state","factoryAuthentication",function(a,b,c){a.appInit=function(){},a.testPass=function(){a.pass=null,a.enter=function(){"srallop"==a.pass&&b.go("login")}},a.appInit()}]);var app=angular.module("dollars");app.directive("back",function(a){function b(a,b,d){b.find(".back").click(function(){c()})}function c(){a.go("prelogin")}return{restrict:"A",link:b}}),app.directive("validate",function(){function a(a,b,c){b.find(".button").click(function(){var a=b.find("#main"),c=b.find("#wrong");a[0].pause(),c[0].play(),c.bind("ended",function(){a[0].play()})})}return{restrict:"A",link:a}});var app=angular.module("dollars");app.factory("factoryAuthentication",["socketio","$state","$location",function(a,b,c){return{init:function(){a.emit("authentication",c.path()),a.on("access:denied",function(a){b.go("login")}),a.on("access:go",function(a){b.go("chat")})}}}]);var app=angular.module("dollars");app.factory("socketio",function(a){var b=io.connect("http://localhost:4040");return{on:function(c,d){b.on(c,function(){var c=arguments;a.$apply(function(){d.apply(b,c)})})},emit:function(c,d,e){b.emit(c,d,function(){var c=arguments;a.$apply(function(){e&&e.apply(b,c)})})}}});var app=angular.module("dollars");app.service("serviceLogin",["socketio","$rootScope","$state",function(a,b,c){var d={};a.on("login:res",function(a){"access"==a?c.go("chat"):(d=a,b.$broadcast("login:erorr"))}),this.login=function(b){a.emit("login",b)},this.getError=function(){return d}}]);var app=angular.module("dollars");app.service("ServiceMessages",["socketio","$rootScope",function(a,b){var c={};a.on("new:message",function(a){c[a.id]=a,b.$broadcast("new:message")}),a.on("new:messages",function(a){c=a,b.$broadcast("new:message")}),this.sendMessage=function(b){a.emit("send:message",b)},this.getMessage=function(){return c},this.getMessages=function(){a.emit("get:messages")},Object.size=function(a){var b,c=0;for(b in a)a.hasOwnProperty(b)&&c++;return c}}]);