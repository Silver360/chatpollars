var myApp=angular.module("dollars",["ui.router"]);myApp.config(["$urlRouterProvider","$stateProvider","$locationProvider",function(a,b,c){b.state("prelogin",{url:"/prelogin",templateUrl:"views/prelogin.html",controller:"preLogin"}).state("login",{url:"/login",templateUrl:"views/login.html",controller:"login"}).state("chat",{url:"/chat",templateUrl:"views/chat.html",controller:"chat"}),a.otherwise("/chat")}]);var app=angular.module("dollars");app.controller("chat",["$scope","$state","socketio",function(a,b,c){a.user="",a.msg={own:"",content:""},a.message="",c.on("new:message",function(b){console.log(b),a.msg.content+=b+" "}),a.sendMessage=function(){c.emit("send:message",this.msg.own),a.msg.own=""}}]);var app=angular.module("dollars");app.controller("login",["$scope","$state","$http",function(a,b,c){a.auth={login:"",password:""},a.msg="",a.login=function(){c.post("http://localhost:8080/login",a.auth).success(function(a,c){"access"==a?b.go("chat"):this.msg=a}).error(function(a){console.log("ErrorLogin: "+a)})}}]);var app=angular.module("dollars");app.controller("preLogin",["$scope","$state",function(a,b){a.appInit=function(){},a.testPass=function(){a.pass=null,a.enter=function(){"srallop"==a.pass&&b.go("login")}},a.appInit()}]);var app=angular.module("dollars");app.directive("back",function(a){function b(a,b,d){b.find(".back").click(function(){c()})}function c(){a.go("prelogin")}return{restrict:"A",link:b}}),app.directive("validate",function(){function a(a,b,c){b.find(".button").click(function(){var a=b.find("#main"),c=b.find("#wrong");a[0].pause(),c[0].play(),c.bind("ended",function(){a[0].play()})})}return{restrict:"A",link:a}});var app=angular.module("dollars");app.factory("socketio",function(a){var b=io.connect("http://localhost:8080");return{on:function(c,d){b.on(c,function(){var c=arguments;a.$apply(function(){d.apply(b,c)})})},emit:function(c,d,e){b.emit(c,d,function(){var c=arguments;a.$apply(function(){e&&e.apply(b,c)})})}}});